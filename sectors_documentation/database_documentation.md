# Database Documentation
This document serves as the authoritative guide to the database architecture underpinning the [sectors.app](https://sectors.app) application. It provides a comprehensive and detailed schema, offering an in-depth look at how data is structured and managed within our **Supabase**-hosted database. Our goal is to ensure clarity and provide all the necessary information for understanding the tables, relationships, and data types that power [sectors.app](https://sectors.app)'s functionalities.

## Underlying Data

### idx_all_time_price 
----------------------
This table presents the pricing data for each company listed on active indexes, showing their performance across 52-week, 90-day, year-to-date, and all-time periods.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key | All active symbol in IDX based on `idx_active_company_profile` |
| `type` | varchar | Primary Key | Type of all time price group (52_week_high, 52_week_low, 90_d_high, 90_d_low, all_time_high, all_time_low, ytd_high, ytd_low) |
| `date` | date | | date of the all time price recorded |
| `price` | int4 | | In Indonesian Rupiah |

### idx_ca_bonus
----------------------
This table presents the historical data of bonus corporate action that has been done by the listed companies
| Column Name    | Data Type               | Constraint          | Description |
| --------------- | ------------------------ | ------------------- | ----------------------------------------------------------------------------------------- |
| `symbol`          | text                     | Primary Key, Foreign Key (`idx_company_profile.symbol`)   | Stock ticker symbol or company code.|
| `recording_date` | date                     | Primary Key      | The date when bonus news is published|
| `old_ratio`      | real                     |                | The ratio value before the change (e.g., before a stock split).|
| `new_ratio`      | real                     |                 | The ratio value after the change (e.g., after a stock split).|
| `cum_date`       | date                     |                 | Last date when buying the stock still includes the right to receive the benefit (cum-date)|
| `ex_date`        | date                     |                 | Date when the stock starts trading without the right to receive the benefit (ex-date).|
| `payment_date`   | date                     |                 | Date when the benefit (e.g., dividend or split shares) is paid or delivered.|
| `updated_on`     | timestamp with time zone |  | Timestamp of the last update to this record.|


### idx_company_customer
----------------------
This table details the revenue generated by the company, itemizing the amount contributed by each client across various financial years.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `supplier_ticker` | text | Primary Key | All active symbol in IDX based on `idx_active_company_profile` |
| `client_name` | text | Primary Key | The complete name of the customer of the supplier |
| `financial_year` | numeric | Primary Key | The year where the revenue from that customer for the supplier is recorded |
| `client_ticker` | text | | The symbol of the costumer company if the customer is listed in the IDX |
| `revenue_amount` | float8 | | The amount of the revenue where the supplier get from the client in IDR |

### idx_company_forecast
----------------------
This table details the revenue generated by the company, itemizing the amount contributed by each client across various financial years.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key, Foreign Key (`idx_company_profile.symbol`) | All active symbol in IDX based on `idx_active_company_profile` |
| `year` | int2 | Primary Key | The year of the forecast value |
| `revenue_estimate` | int8 | | The estimate revenue value of that specific year |
| `eps_estimate` | float4 | | The estimate Earning per Share (EPS) value of that specific year |
| `updated_on` | timestamptz | | The time when the data is updated or pushed into the database |

### idx_company_profile
----------------------
This table details the information of each public company in Indonesian Stock Exchange

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key | All symbol (4 characters code) in IDX |
| `updated_on` | timestamptz | | The time when the data is updated or pushed into the database |
| `address` | text | | The address where the main office (headquarters) of the companies located at |
| `email` | text | | The email address of the company |
| `phone` | text | | The phone number of the company |
| `fax` | text | | The fax number of the company |
| `NPWP` | text | | The Indonesian tax information number of the company |
| `website` | text | | The website of the company |
| `register` | text | | The company that become the Share Registrar (Biro Administrasi Efek) of the company |
| `shareholders` | json | | List of the major shareholders of the company where each shareholders have the info about their name, type, shares amount, and shares percentage |
| `industry` | text | | The industry where the company operate at based on the IDX-IC |
| `sub_industry` | text | | The sub-industry where the company operate at based on the IDX-IC |
| `listing_date` | date | | The listing date of the company |
| `commissioners` | jsonb | | The list of the company commissioner, each data has information about (name, position, and independent (true or false)) |
| `directors` | jsonb | | The list of the company directors, each data has information about (name, position, and affiliation (true or false)) |
| `audit_committees` | jsonb | | The list of the company audit committees, each data has information about (name and position) |
| `delisting_date` | date | | The delisting date of the company (if still public company the value will be null) |
| `current_source` | int2 | | The listing date of the company | # need to be deleted if possible
| `wsj_format` | int2 | | The listing date of the company | # need to be deleted if possible
| `company_name` | text | | The name of the company |
| `listing_board` | text | | The type of board where the company is located at (based on IDX board classification) |
| `yf_currency` | int2 | | The currency use for daily data and price data |
| `no_logo` | bool | | The existence of the company's logo in the storage |
| `sub_sector_id` | int2 | Foreign Key (idx_subsector_metadata.sub_sector_id) | The sub-sector where the company operate at based on the IDX-IC |
| `morningstar_code` | text | | The company's code in morningstar website | # need to be deleted if possible
| `underwriter` | text | | The list of company's underwriter |
| `ipo_price` | float4 | | The price of the share when it first listed in IDX |
| `alias` | text[] | | The other name of the company or the old name of the company (if any) |
| `indices` | text[] | | The index in IDX where the company belongs to |

### idx_daily_data
----------------------
This table details the revenue generated by the company, itemizing the amount contributed by each client across various financial years.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key, Foreign Key (`idx_company_profile.symbol`) | All active symbol in IDX based on `idx_company_profile` |
| `date` | date | Primary Key | The date when the data is recorded |
| `mcap_method` | int2 | | The way to get the market capitalization value (1: directly from data source, 2: bfill, 3: ffill) |
| `market_cap` | int8 | | The total value of all traded outstanding shares of a company |
| `close` | int4 | | The close price of each company on a selected date (auto-adjusted if there's stock split)|
| `volume` | int8 | | The number of shares traded in that day |
| `updated_on` | timestamptz | | The time when the data is updated or pushed into the database |

### idx_dividend
----------------------
This table details all of the dividend payment made by the companies listed in idx.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key, Foreign Key (`idx_company_profile.symbol`) | All active symbol in IDX based on `idx_company_profile` |
| `date` | date | Primary Key | The ex-date (execution date) of the dividend |
| `yield` | float4 | | The annual yield percentage of a dividend. It calculated by diving the dividend amount with the last close price of the year (So, all the yield value in the current year will be different) |
| `dividend` | float4 | | The number of dividend that each stock get (auto-adjusted) if there's stock split |
| `dividend_original` | float4 | | The dividend amount each stock receives, not adjusted for stock splits or other corporate actions that may affect share price.|
| `updated_on` | timestamptz | | The time when the data is updated or pushed into the database |

### idx_esg_score
----------------------
This table details all of the Environmental, Social, and Governance (ESG) risk of each company in IDX

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key, Foreign Key (`idx_company_profile.symbol`) | All active symbol in IDX based on `idx_company_profile` |
| `last_esg_update_date` | timestamptz | | The ESG score update from any reason other than the annual assessment cycle (e.g. sub-industry assessment, news event, etc.) |
| `esg_score` | float4 | | The score of the esg risk (0 is considered negligible risk) |
| `controversy_risk` | int2 | | The controversy risk level in the past 3 years |
| `updated_on` | timestamptz | | The time when the data is updated or pushed into the database |
| `industry_rank` | int8 | | The ranking of each company in its respective industry (1st = lowest risk) |
| `total_companies_on_industry` | int8 | | The total number of companies in the world in this company's industry |
| `global_rank` | int8 | | The ranking of each company in the universe (1st = lowest risk) |
| `total_companies_on_ms` | int8 | | The total number of companies in the world (based on the esg data source) |
| `last_esg_full_update_date` |  |  | The ESG score update from the annual assessment cycle |
| `industry_group` | text |  | The industry where the company belongs to |
| `management` | text |  | How well a company is managing its relevant ESG issues (Strong, Average, Weak) |
| `exposure` | text |  | The extent to which a company is exposed to different material ESG issues (Low, Medium, High) |
| `sdgi` | text[] |  |  |
| `event` | text[] |  | The event that contributing to the esg risk rating |

### idx_fear_and_greed
----------------------

### idx_filings
----------------------
This table details the filings (insider trading) that made by each company in IDX (keterbukaan informasi)

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `id`                             | bigint                      | PRIMARY KEY | Unique identifier for each record.                        |
| `created_at`                    | timestamp with time zone    |     | Timestamp when the record was created (auto-generated).   |
| `title`                          | text                        |     | Title or headline related to the transaction or event.    |
| `body`                           | text                        |     | Detailed description or content of the record.            |
| `source`                         | text                        |     | Filing or Transaction Documents URL.    |
| `timestamp`                      | timestamp without time zone |     | Date and time when the transaction/event occurred.        |
| `sector` | text |  | The sector where the company operate at based on the IDX-IC |
| `sub_sector` | text |  | The sub-sector where the company operate at based on the IDX-IC |
| `tags`                           | ARRAY                       |     | List of keywords or labels for categorization.            |
| `transaction_type`              | text                        |     | Type of transaction (e.g., buy, sell, transfer).          |
| `holding_before`                | bigint                      |     | Number of shares held before the transaction.             |
| `holding_after`                 | bigint                      |     | Number of shares held after the transaction.              |
| `amount_transaction`            | bigint                      |     | Total number of shares involved in the transaction.       |
| `holder_type`                   | text                        |     | Type of holder (e.g., insider, institution).              |
| `holder_name`                   | text                        |     | Name of the person or entity holding the shares.          |
| `price`                          | numeric                     |     | Share price at the time of the transaction.               |
| `transaction_value`             | numeric                     |     | Total value of the transaction in monetary terms.         |
| `price_transaction`             | jsonb                       |     | JSON object with detailed price breakdown (if available). |
| `share_percentage_before`      | double precision            |     | Ownership percentage before the transaction.              |
| `share_percentage_after`       | double precision            |     | Ownership percentage after the transaction.               |
| `share_percentage_transaction` | double precision            |     | Ownership percentage change due to the transaction.       |
| `UID`                            | text                        |     | Unique identifier string for reference.                   |
| `symbol`                         | text                        |     | Stock symbol associated with the record.           |

### idx_financial_sheets_annual
----------------------
This table details of annual financial metrics from the official financial report into 3 grouping, income statement, balance sheet, and cash flow.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key | All active symbol in IDX based on `idx_company_profile` |
| `date` | date | Primary Key | The financial metrics report date |
| `income_stmt_metrics` | jsonb | | The income statement metrics of the company from the financial report |
| `balance_sheet_metrics` | jsonb | | The balance sheets metrics of the company from the financial report |
| `cash_flow_metric` | float4 | | The cash flow metrics of the company from the financial report |

### idx_financial_sheets_quarterly
----------------------
This table details of quarter financial metrics from the official financial report into 3 grouping, income statement, balance sheet, and cash flow.

| Column Name | Data Type | Constraints | Description |
|-------------|-----------|-------------|----------|
| `symbol` | text | Primary Key | All active symbol in IDX based on `idx_company_profile` |
| `date` | date | Primary Key | The financial metrics report date |
| `income_stmt_metrics` | jsonb | | The income statement metrics of the company from the financial report |
| `balance_sheet_metrics` | jsonb | | The balance sheets metrics of the company from the financial report |
| `cash_flow_metric` | float4 | | The cash flow metrics of the company from the financial report |
| `income_stmt_metrics_cumulative` | jsonb | | The income statement metrics of the company from the financial report (cumulative to year to date) |
| `cash_flow_metric_cumulative` | float4 | | The cash flow metrics of the company from the financial report (cumulative to year to date) |

### idx_financials_annual
----------------------
This table details of annual financial metrics from the curated financial report.

| Column Name                       | Data Type                | Constraint  | Description |
| --------------------------------- | ------------------------ | ----------- | -------------------------------------------------------------------------- |
| `symbol`                          | text                     | Primary Key | Ticker symbol of an active company listed on IDX, based on `idx_company_profile`.|
| `date`                            | date                     | Primary Key | Reporting date of the financial metrics.|
| `net_operating_cash_flow`         | bigint                   |             | Net cash generated from operating activities.|
| `total_assets`                    | bigint                   |             | Total assets held by the company.|
| `total_liabilities`               | bigint                   |             | Total liabilities owed by the company.|
| `total_current_liabilities`       | bigint                   |             | Total current liabilities due within one year.|
| `total_equity`                    | bigint                   |             | Total equity.|
| `total_revenue`                   | bigint                   |             | Total revenue generated during the reporting period.|
| `net_income`                      | bigint                   |             | Net profit or loss after all expenses and taxes.|
| `total_debt`                      | bigint                   |             | Total interest-bearing debt.|
| `stockholders_equity`             | bigint                   |             | Total value of equity held by shareholders.|
| `ebit`                            | bigint                   |             | Earnings before interest and taxes.|
| `ebitda`                          | bigint                   |             | Earnings before interest, taxes, depreciation, and amortization.|
| `cash_and_short_term_investments` | bigint                   |             | Total cash and liquid short-term investments.|
| `cash_only`                       | bigint                   |             | Total cash available (excluding investments).|
| `total_cash_and_due_from_banks`   | bigint                   |             | Total cash including amounts due from banks.|
| `diluted_shares_outstanding`      | bigint                   |             | Total number of diluted shares outstanding.|
| `gross_income`                    | bigint                   |             | Gross income before expenses.|
| `pretax_income`                   | bigint                   |             | Income before tax expenses. |
| `income_taxes`                    | bigint                   |             | Total income tax expenses.|
| `total_non_current_assets`        | bigint                   |             | Assets not expected to be converted to cash within one year.|
| `free_cash_flow`                  | bigint                   |             | Net cash after capital expenditures.|
| `interest_expense_non_operating`  | bigint                   |             | Interest expense not related to core operations.|
| `operating_income`                | bigint                   |             | Income from primary business operations.|
| `source`                          | smallint                 |             | Identifier for the data source.|
| `updated_on`                      | timestamp with time zone |             | Timestamp of the latest update in UTC.|
| `net_investing_cash_flow`         | bigint                   |             | Net cash used in or generated from investing activities.|
| `net_financing_cash_flow`         | bigint                   |             | Net cash used in or generated from financing activities.|
| `inventories`                     | bigint                   |             | Value of goods available for sale.|
| `retained_earnings`               | bigint                   |             | Accumulated net income retained in the business.|
| `prepaid_assets`                  | bigint                   |             | Payments made in advance for goods or services.|
| `interest_income`                 | bigint                   |             | Income earned from interest-bearing assets.|
| `interest_expense`                | bigint                   |             | Cost incurred from borrowed funds.|
| `net_interest_income`             | bigint                   |             | Interest income minus interest expense.|
| `non_interest_income`             | bigint                   |             | Income earned from non-interest sources.|
| `operating_expense`               | bigint                   |             | Expenses incurred through normal business operations.|
| `provision`                       | bigint                   |             | Provisions for losses or obligations.|
| `non_operating_income_or_loss`    | bigint                   |             | Income or loss not related to main business activities.|
| `minorities`                      | bigint                   |             | Minority interest in net income.  |
| `cost_of_revenue`                 | bigint                   |             | Cost directly related to revenue generation.|
| `allowance_for_loans`             | bigint                   |             | Reserves set aside for potential loan losses.|
| `total_current_asset`             | bigint                   |             | Assets expected to be converted to cash within a year.|
| `total_non_current_liabilities`   | bigint                   |             | Liabilities due after more than one year.|
| `net_cash_flow`                   | bigint                   |             | Total net change in cash position.|
| `capital_expenditure`             | bigint                   |             | Funds used to acquire or upgrade physical assets.|

### idx_financials_quarterly
----------------------
This table details of quarter financial metrics from the curated financial report.
| Column Name                        | Data Type               | Constraint | Description                                                      |
| ----------------------------------- | ------------------------ | ---------- | ---------------------------------------------------------------- |
| `symbol`                              | text                     | Primary Key | Ticker symbol of an active company listed on IDX, based on `idx_company_profile`|
| `date`                                | date                     | Primary Key | Reporting date of the financial metrics.                         |
| `net_operating_cash_flow`          | bigint                   |    | Net cash generated from operating activities.                    |
| `total_assets`                       | bigint                   |    | Total assets held by the company.                                |
| `total_liabilities`                  | bigint                   |    | Total liabilities owed by the company.                           |
| `total_current_liabilities`         | bigint                   |    | Liabilities due within one year.                                 |
| `total_equity`                       | bigint                   |    | Total shareholders' equity.                                      |
| `total_revenue`                      | bigint                   |    | Total revenue during the reporting period.                       |
| `net_income`                         | bigint                   |    | Net profit or loss after all expenses and taxes.                 |
| `total_debt`                         | bigint                   |    | Total interest-bearing debt.                                     |
| `stockholders_equity`                | bigint                   |    | Equity attributable to shareholders.                             |
| `ebit`                                | bigint                   |    | Earnings before interest and taxes.                              |
| `ebitda`                              | bigint                   |    | Earnings before interest, taxes, depreciation, and amortization. |
| `cash_and_short_term_investments` | bigint                   |    | Cash and highly liquid investments.                              |
| `cash_only`                          | bigint                   |    | Total cash excluding short-term investments.                     |
| `total_cash_and_due_from_banks`  | bigint                   |    | Cash including amounts due from banks.                           |
| `diluted_shares_outstanding`        | bigint                   |    | Total number of diluted shares outstanding.                      |
| `gross_income`                       | bigint                   |    | Total revenue minus cost of goods sold.                          |
| `pretax_income`                      | bigint                   |    | Income before taxes.                                             |
| `income_taxes`                       | bigint                   |    | Total tax expenses.                                              |
| `total_non_current_assets`         | bigint                   |    | Assets expected to provide value beyond one year.                |
| `free_cash_flow`                    | bigint                   |    | Cash available after capital expenditures.                       |
| `interest_expense_non_operating`   | bigint                   |    | Non-operating interest expenses.                                 |
| `operating_income`                   | bigint                   |    | Income from core operations.                                     |
| `source`                              | smallint                 |    | Identifier for the data source.                                  |
| `updated_on`                         | timestamp with time zone |    | Timestamp of last update (default: current UTC time).            |
| `net_financing_cash_flow`          | bigint                   |    | Net cash from financing activities.                              |
| `net_investing_cash_flow`          | bigint                   |    | Net cash from investing activities.                              |
| `inventories`                         | bigint                   |    | Value of goods held in stock.                                    |
| `prepaid_assets`                     | bigint                   |    | Prepaid expenses recorded as assets.                             |
| `retained_earnings`                  | bigint                   |    | Cumulative profits retained in the business.                     |
| `interest_income`                    | bigint                   |    | Income from interest-bearing assets.                             |
| `interest_expense`                   | bigint                   |    | Interest cost on borrowings.                                     |
| `net_interest_income`               | bigint                   |    | Interest income minus interest expense.                          |
| `non_interest_income`               | bigint                   |    | Revenue not derived from interest.                               |
| `operating_expense`                  | bigint                   |    | Costs related to primary business operations.                    |
| `provision`                           | bigint                   |    | Funds set aside for potential losses.                            |
| `non_operating_income_or_loss`    | bigint                   |    | Income/loss not from main business activities.                   |
| `minorities`                          | bigint                   |    | Earnings attributable to minority interests.                     |
| `cost_of_revenue`                   | bigint                   |    | Direct costs tied to revenue generation.                         |
| `allowance_for_loans`               | bigint                   |    | Reserves for possible loan defaults.                             |
| `total_current_asset`               | bigint                   |    | Assets expected to be converted to cash within a year.           |
| `total_non_current_liabilities`    | bigint                   |    | Liabilities due beyond one year.                                 |
| `net_cash_flow`                     | bigint                   |    | Net change in cash position.                                     |
| `capital_expenditure`                | bigint                   |    | Spending on fixed assets like property or equipment.             |

### idx_institution_transactions
----------------------
This table details of big transaction created by the institution.
| Column Name     | Data Type               | Constraint | Description                                                 |
| ---------------- | ------------------------ | ---------- | ----------------------------------------------------------- |
| `symbol`           | text                     | Primary Key   | Ticker symbol of an active company listed on IDX, based on `idx_company_profile`. |
| `updated_on`      | timestamp with time zone | Primary Key   | Timestamp of the latest update |
| `net_transaction` | bigint                   |    | Net value of stock transactions (e.g., buy minus sell) in number of shares. |
| `top_sellers`     | jsonb                    |    | JSON object containing the name of top seller brokers or entities and the amount of shares they sell. |
| `date`             | date                     |   | Date of the transaction data get from the sources |
| `top_buyers`      | jsonb                    |   | JSON object containing the name top buyer brokers or entities shares they buy. |

### idx_ipo_details
----------------------
This table details of company new listing.
| Column Name                 | Data Type                  | Constraint | Description                                                               |
| ---------------------------- | --------------------------- | ---------- | ------------------------------------------------------------------------- |
| `symbol`                       | text                        | Primary Key   | Ticker symbol of the company.                                             |
| `shares_offered`              | bigint                      |    | Number of shares offered in the IPO.                                      |
| `percent_total_shares`       | real                        |    | Percentage of total shares being offered.                                 |
| `book_building_start_date`  | date                        |    | Start date of the book building period.                                   |
| `book_building_end_date`    | date                        |    | End date of the book building period.                                     |
| `book_building_lower_bound` | integer                     |    | Lower bound of the book building price range.                             |
| `book_building_upper_bound` | integer                     |    | Upper bound of the book building price range.                             |
| `offering_start_date`        | date                        |    | Start date of the public offering.                                        |
| `offering_end_date`          | date                        |    | End date of the public offering.                                          |
| `offering_price`              | integer                     |    | Final offering price of the shares.                                       |
| `distribution_date`           | date                        |    | Date when shares are distributed to investors.                            |
| `prospectus_url`              | text                        |    | Link to the official IPO prospectus.                                      |
| `additional_info_url`        | text                        |    | Link to additional information or external documentation.                 |
| `created_at`                  | timestamp with time zone    |    | Timestamp when the record was created.        |
| `updated_at`                  | timestamp without time zone |    | Timestamp when the record was last updated. |
| `company_name`                | text                        |    | Name of the company going public.                                         |
| `listing_date`                | date                        |    | Date when the stock is officially listed on the exchange.                 |

### idx_ipo_perf
----------------------
This table details of the performance of recently listed company.
| Column Name | Data Type               | Constraint | Description                                                 |
| ------------ | ------------------------ | ---------- | ----------------------------------------------------------- |
| `symbol`       | text                     | Primary Key   | Ticker symbol of the stock.                                 |
| `chg_7d`      | real                     |    | Percentage price change for the first 7 days after ipo.|
| `chg_30d`     | real                     |    | Percentage price change for the first 30 days after ipo.|
| `chg_90d`     | real                     |    | Percentage price change for the first 90 days after ipo|
| `chg_365d`    | real                     |    | Percentage price change for the first 365 days (1 year) after ipo.|
| `updated_on`  | timestamp with time zone |    | Timestamp when the record was last updated.|
| `chg_1d`      | real                     |    | Percentage price change for the first day (daily change) of IPO. |

### idx_key_stats
This table details the key statistics data for each listed company.
| Column Name | Data Type               | Constraint | Description                                                 |
| ------------ | ------------------------ | ---------- | ----------------------------------------------------------- |
| `symbol`                                | text       | PRIMARY KEY | Stock ticker symbol, uniquely identifying the company.                     |
| `point_summaries`                      | jsonb      |     | Key financial or business highlights in JSON format.                       |
| `employee_num`                         | integer    |     | Number of employees reported for the company.                              |
| `holders_breakdown`                    | jsonb      |     | Ownership structure (e.g., insiders, institutions) in JSON format.         |
| `forward_eps`                          | real       |     | Projected earnings per share for upcoming periods.                         |
| `technical_rating_breakdown` (deleted_soon)         | jsonb      |     | Technical analysis ratings (daily) breakdown in JSON format.               |
| `analyst_rating_breakdown`            | jsonb      |     | Analyst recommendations/ratings breakdown in JSON format.                  |
| `technical_rating_breakdown_weekly`  (deleted_soon)| jsonb      |     | Technical analysis ratings (weekly) breakdown in JSON format.              |
| `technical_rating_breakdown_monthly` (deleted_soon)| jsonb      |     | Technical analysis ratings (monthly) breakdown in JSON format.             |
| employee_`num_manual                 | integer    |     | Manually entered or adjusted employee number (override of `employee_num`). |

### idx_manual_input
----------------------
This table details of annual financial metrics from the manual curated financial report.
| Column Name            | Data Type               | Constraint | Description                                                                |
| ----------------------- | ------------------------ | ---------- | -------------------------------------------------------------------------- |
| `symbol`                  | text                     | Primary Key   | Ticker symbol of the stock.                                                |
| `updated_on`             | timestamp with time zone |   | Timestamp when the record was last updated. |
| `financial_year`         | smallint                 | Primary Key   | The fiscal year the data refers to.                                        |
| `sankey_component`       | jsonb                    |    | JSON object containing data for visual Sankey diagrams.                    |
| `income_stmt_metrics`   | jsonb                    |    | JSON object containing key income statement metrics.                       |
| `source_url`             | text                     |    | URL linking to the data source or reference document.                      |
| `balance_sheet_metrics` | jsonb                    |    | JSON object containing key balance sheet metrics.                          |
| `cash_flow_metrics`     | jsonb                    |    | JSON object containing key cash flow metrics.                              |
| `employee_breakdown`     | jsonb                    |    | JSON object showing employee distribution (e.g., by department or region). |
| `industry_breakdown`     | jsonb                    |    | JSON object showing breakdown by industry segments.                        |

### idx_news
----------------------
This table details of the important news from some third party financial platform.
| Column Name | Data Type                  | Constraint | Description                                                           |
| ------------ | --------------------------- | ---------- | --------------------------------------------------------------------- |
| `id`           | bigint                      | Primary Key   | Unique identifier for the record.                                     |
| `created_at`  | timestamp with time zone    |    | Timestamp when the record was created. |
| `title`        | text                        |    | Title of the news. |
| `body`         | text                        |    | Body/content of the news. |
| `source`       | text                        |    | Source or origin of the news item. |
| `timestamp`    | timestamp without time zone |    | Timestamp indicating when the news published. |
| `sector`       | text                        |    | The sector associated with the news (e.g., Technology, Finance). |
| `sub_sector`  | ARRAY                       |    | List of sub-sectors related to the news. |
| `tags`         | ARRAY                       |    | List of tags for categorization or filtering. |
| `tickers`      | ARRAY                       |    | List of associated stock tickers (symbol). |
| `dimension`    | jsonb                       |    | Optional JSON structure for dimensional metadata. |
| `votes`        | jsonb                       |    | Optional JSON object for vote-related data (e.g., upvotes/downvotes). |
| `score`        | bigint                      |    | The score of the news reliability. |

### idx_right_issue
----------------------
This table present the detail of right issue corporate action of listed companies in IDX
| Column Name     | Data Type               | Constraint          | Description  |
| ---------------------- | ------------------------ | ------------------- |------------------------------------------------------------------------------------ |
| `symbol`          | text                     | Primary Key, Foreign Key (`idx_company_profile.symbol`)   | Stock ticker symbol or company code.|
| `recording_date` | date                     | Primary Key      | Official date the right issue announcement is published.|
| `old_ratio`             | real                     |                 | Ratio value before the change before a rights issue .|
| `new_ratio`             | real                     |                 | Ratio value after the change after a rights issue.                  |
| `price`                  | real                     |                 | Subscription or offer price per share for the corporate action.  |
| `cum_date`              | date                     |                 | Last date when purchasing the stock still includes rights/benefits (cum-date). |
| `ex_date`               | date                     |                 | Date when the stock starts trading without rights/benefits (ex-date).  |
| `trading_period_start` | date                     |                 | Start date of the trading period for rights or new shares.|
| `trading_period_end`   | date                     |                 | End date of the trading period for rights or new shares.|
| `subscription_date`     | date                     |                 | Date by which eligible shareholders must subscribe to receive new shares or benefits.|
| `updated_on`            | timestamp with time zone | | Timestamp of the last update to this record.|

### idx_rups
----------------------
This table present the detail of Rapat Umum Pemegang Saham (RUPS) or General Meeting of Shareholders of listed companies in IDX
| Column Name     | Data Type               | Constraint          | Description  |
| ---------------- | ------------------------ | ------------------- | -------------------------------------------------------- |
| `symbol`           | text                     | Primary Key, Foreign Key (`idx_company_profile.symbol`) | Stock ticker symbol or company code.  |
| `recording_date`  | date                     | Primary Key | The date when RUPS announcement is published |
| `rups_date`       | date                     |             | Scheduled date of the General Meeting of Shareholders (RUPS).|
| `rups_place_ket` | text                     |                 | Information if the RUPS get cancelled |
| `updated_on`      | timestamp with time zone |  | Timestamp of the last update to this record. |

### idx_stock_split
----------------------
This table details the stock split corporate action of each symbol.
| Column Name | Data Type               | Constraint | Description                                                                |
| ------------ | ------------------------ | ---------- | -------------------------------------------------------------------------- |
| `symbol`       | text                     | Primary Key   | Ticker symbol of the stock undergoing a split.                             |
| `date`         | date                     | Primary Key   | Effective date of the stock split date.                            |
| `split_ratio` | real                     |   | Ratio at which the stock is being split (e.g., 2.0 for a 2-for-1 split).   |
| `updated_on`  | timestamp with time zone |    | Timestamp of the last update |
| `applied_on`  | timestamp with time zone |    | Applied changes of data dependent on the stock split                    |

### idx_subsector_metadata
----------------------
This table details the sub-sector data
| Column Name               | Data Type | Constraint | Description                                                            |
| -------------------------- | ---------- | ---------- | ---------------------------------------------------------------------- |
| `sector`                     | text       |    | The main sector classification (e.g., Finance, Technology).          |
| `sub_sector`                | text       |    | The more specific category within a sector.                            |
| `slug`                       | text       |    | URL-friendly identifier for the sub-sector.                            |
| `description`                | text       |    | Description of the sub-sector.                                         |
| `sub_sector_id`            | smallint   | Primary Key   | Unique identifier for the sub-sector.                                  |
| `pe_index_description`     | text       |    | Description related to the Price-to-Earnings (P/E) index.     |
| `growth_index_description` | text       |    | Description of the growth index for the sub-sector.           |
| `health_index_description` | text       |    | Description of the financial health index for the sub-sector. |

### idx_upcoming_dividend
----------------------
This table details dividend announcement that haven't past the ex-date
| Column Name     | Data Type               | Constraint | Description                                                              |
| ---------------- | ------------------------ | ---------- | ------------------------------------------------------------------------ |
| `symbol`           | text                     |    | Ticker symbol of the stock.                                               |
| `ex_date`         | date                     |    | The ex-dividend date when the stock starts trading without the dividend. |
| `payment_date`    | date                     |    | The date when the dividend is paid to shareholders.                      |
| `dividend_amount` | real                     |    | The amount of dividend paid per share.                                   |
| `updated_on`      | timestamp with time zone |    | Timestamp when the record was last updated                     |

### idx_warrant
----------------------
This table present the detail of warrants corporate action of listed companies in IDX
| Column Name     | Data Type               | Constraint          | Description  |
| ---------------------- | ------------------------ | ------------------- | ------------------------------------------------------------------ |
| `symbol`           | text                     | Primary Key, Foreign Key (`idx_company_profile.symbol`) | Stock ticker symbol or company code.  |
| `old_ratio`             | real                     |                 | Conversion or exercise ratio before adjustment.                                       |
| `new_ratio`             | real                     |                 | Conversion or exercise ratio after adjustment.                                        |
| `price`                  | real                     |                 | Exercise or subscription price per unit for the security.                             |
| `ex_per_start`         | date                     |                 | Start date of the exercise period when holders can convert or exercise their rights.  |
| `ex_per_end`           | date                     |                 | End date of the exercise period when conversion or exercise closes.                   |
| `maturity_date`         | date                     |                 | Maturity date when the security expires or is redeemed.                               |
| `ex_date_tunai`        | date                     |                 | Ex-date for cash settlement related to the security (if applicable).                  |
| `trading_period_start` | date                     | Primary Key            | Start date of the trading period for the security (e.g., warrants). |
| `trading_period_end`   | date                     |                 | End date of the trading period for the security (e.g., warrants).                     |
| `updated_on`            | timestamp with time zone |  | Timestamp of the last update to this record.                                          |

### index_daily_data
----------------------
This table details the price of some indices in IDX, KLSE, and SGX
| Column Name | Data Type        | Constraint | Description                                                  |
| ------------ | ----------------- | ---------- | ------------------------------------------------------------ |
| `date`         | date              | Primary Key   | The date of the index price record.                          |
| `index_code`  | character varying | Primary Key   | The unique code representing the index (e.g., sector index). |
| `price`        | double precision  |    | The index price or value on the given date.                  |
| `index_name`  | character varying |    | The full name of the index.                                  |

### klse_companies (pending the data will be updated in the mean time)
----------------------

### sgx_companies
----------------------
| Column Name                          | Data Type       | Constraint | Description                                                      |
| ------------------------------------- | ---------------- | ---------- | ---------------------------------------------------------------- |
| `name`                                  | text             |    | Full name of the company or instrument.                          |
| `investing_symbol`                     | text             |    | Unique symbol from third part source.                                |
| `currency`                              | text             |    | Currency in which the instrument is denominated.                 |
| `market_cap`                           | double precision |    | Total market capitalization.                                     |
| `volume`                                | double precision |    | Trading volume.                                                  |
| `pe`                                    | double precision |    | Price-to-Earnings ratio.                                         |
| `revenue`                               | double precision |    | Total revenue.                                                   |
| `eps`                                   | double precision |    | Earnings per share.                                              |
| `beta`                                  | double precision |    | Beta value (volatility measure).                                 |
| `monthly_signal`                       | text             |    | Monthly technical signal (e.g., Buy/Sell/Hold).                  |
| `change_ytd`                           | double precision |    | Year-to-date price change (percentage).                          |
| `change_1y`                            | double precision |    | 1-year price change (percentage).                                |
| `change_3y`                            | double precision |    | 3-year price change (percentage).                                |
| `ps_ttm`                               | double precision |    | Price-to-Sales ratio (Trailing Twelve Months).                   |
| `pcf`                                   | double precision |    | Price-to-Cash-Flow ratio.                                        |
| `pb`                                    | double precision |    | Price-to-Book ratio.                                             |
| `five_year_eps_growth`               | double precision |    | EPS growth over the last 5 years.                                |
| `five_year_sales_growth`             | double precision |    | Sales growth over the last 5 years.                              |
| `five_year_capital_spending_growth` | double precision |    | Growth in capital spending over the last 5 years.                |
| `asset_turnover`                       | double precision |    | Asset turnover ratio.                                            |
| `inventory_turnover_ttm`              | double precision |    | Inventory turnover (TTM).                                        |
| `receivable_turnover`                  | double precision |    | Receivables turnover ratio.                                      |
| `gross_margin`                         | double precision |    | Gross profit margin.                                             |
| `operating_margin`                     | double precision |    | Operating profit margin.                                         |
| `net_profit_margin`                   | double precision |    | Net profit margin.                                               |
| `quick_ratio`                          | double precision |    | Quick ratio (liquidity measure).                                 |
| `current_ratio`                        | double precision |    | Current ratio (liquidity measure).                               |
| `debt_to_equity`                      | double precision |    | Debt-to-equity ratio.                                            |
| `dividend_yield_5y_avg`              | double precision |    | Average dividend yield over the past 5 years.                    |
| `dividend_growth_rate`                | double precision |    | Dividend growth rate.                                            |
| `payout_ratio`                         | double precision |    | Dividend payout ratio.                                           |
| `sector`                                | text             |    | Industry sector of the company.                                  |
| `sub_sector`                           | text             |    | Industry sub-sector of the company.                              |
| `symbol`                                | text             |  Primary Key  | Unique identifier for the security.                              |
| `close`                                 | jsonb            |    | Historical closing prices in JSON format.                        |
| `employee_num`                         | double precision |    | Number of employees.                                             |
| `historical_earnings`                  | jsonb            |    | Historical earnings data in JSON format.                         |
| `historical_revenue`                   | jsonb            |    | Historical revenue data in JSON format.                          |
| `earnings`                              | double precision |    | Current earnings value.                                          |
| `forward_dividend`                     | double precision |    | Forward-looking annual dividend value.                           |
| `forward_dividend_yield`              | double precision |    | Forward-looking dividend yield.                                  |
| `dividend_ttm`                         | double precision |    | Dividend value for the trailing twelve months.                   |
| `short_name`                           | text             |    | Shortened name of the company or instrument.                     |
| `historical_dividends`                 | jsonb            |    | Historical dividend records in JSON format.                      |
| `all_time_price`                      | jsonb            |    | All-time price data in JSON format.                              |
| `one_year_eps_growth`                | double precision |    | EPS growth over the past year.                                   |
| `one_year_sales_growth`              | double precision |    | Sales growth over the past year.                                 |
| `is_active`                            | boolean          |    | Indicates whether the security is currently active (true/false). |

### sgx_short_sell
----------------------
This table details the short transaction in SGX
| Column Name | Data Type        | Constraint | Description                                          |
| ------------ | ----------------- | ---------- | ---------------------------------------------------- |
| `symbol`       | character varying |    | The stock symbol associated with the record.         |
| `name`         | text              |    | The name of the company or security.                 |
| `date`         | date              |  Primary Key  | The date when the data was recorded.                 |
| `volume`       | integer           |    | The total number of shares traded on the given date. |
| `value`        | real              |    | The total value of shares traded on the given date.  |

## View

### idx_active_company_profile
----------------------
This view only filtering the data in [idx_company_profile](#idx_company_profile) table that still active or the listing_date column value is null. Also, not all the column is returned here, only several important column are returned her

| Column Name       | Data Type                | Description |
| ----------------- | ------------------------ | ----------- |
| `company_name`     | text                     | The name of the company        |
| `symbol`            | text                     | All symbol (4 characters code) in IDX        |
| `address`           | text                     | The address where the main office (headquarters) of the companies located at        |
| `email`             | text                     | The email address of the company        |
| `phone`             | text                     | The phone number of the company        |
| `fax`               | text                     | The fax number of the company        |
| `NPWP`              | text                     | The Indonesian tax information number of the company        |
| `website`           | text                     | The website of the company        |
| `listing_date`     | date                     | The listing date of the company        |
| `listing_board`    | text                     | The type of board where the company is located at (based on IDX board classification)        |
| `industry`          | text                     | The industry where the company operate at based on the IDX-IC        |
| `sub_industry`     | text                     | The sub-industry where the company operate at based on the IDX-IC        |
| `register`          | text                     | The company that become the Share Registrar (Biro Administrasi Efek) of the company        |
| `shareholders`      | jsonb                    | 	List of the major shareholders of the company where each shareholders have the info about their name, type shares amount, and shares percentage        |
| `directors`         | jsonb                    | The list of the company directors, each data has information about (name, position, and affiliation (true or false))        |
| `comissioners`      | jsonb                    | The list of the company commissioner, each data has information about (name, position, and independent (true or false))        |
| `audit_committees` | jsonb                    | The list of the company audit committees, each data has information about (name and position)        |
| `updated_on`       | timestamp with time zone | The time when the data is updated or pushed into the database        |
| `nologo`            | boolean                  | The existence of the company's logo in the storage        |
| `sub_sector_id`   | smallint                 | The sub-sector where the company operate at based on the IDX-IC        |
| `wsj_format`       | smallint                 | null        |
| `yf_currency`      | smallint                 | null        |
| `current_source`   | smallint                 | null        |
| `morningstar_code` | text                     | null        |
| `indices`           | ARRAY                    | The index in IDX where the company belongs to |

### idx_combine_financials_annual
----------------------
This view combine the annual financial report from 3 sources with the hierarchy or data prioritization as explained below.

* The first priority is the data from [idx_manual_input](#idx_manual_input)
* The second priority if the metrics is not available in `idx_manual_input` or the data there is `null`, will be from [idx_financial_sheets_annual](#idx_financial_sheets_annual)
* If from both the first and second source the metrics is not available or the data is null, then the data will be taken from [idx_financials_annual](#idx_financials_annual)

Please note in `idx_combine_financials_annual`, there are some metrics that can be only available to financial institution only and non-financial institution only. In that case, when the metrics is for financial institution only, the data will be null for non-financial institution and vice versa

| Column Name       | Data Type                | Description |
| ------------------------------------- | ---------- | -------------------------------------------------------------------------- |
| `symbol`                                | text       | Stock ticker symbol or company code.                                       |
| `date`                                  | date       | Financial reporting date for the data record.                              |
| `revenue`                               | bigint     | Total revenue generated during the reporting period.                       |
| `gross_profit`                         | bigint     | Revenue minus cost of revenue.                                             |
| `cost_of_revenue`                     | bigint     | Total direct costs to produce goods or services sold.                      |
| `operating_pnl`                        | bigint     | Operating profit or loss from core business operations.                    |
| `tax`                                   | bigint     | Income tax expense for the period.                                         |
| `earnings_before_tax`                 | bigint     | Profit before income tax is deducted (EBT).                                |
| `interest_expense_non_operating`     | bigint     | Interest expense not related to core operations.                           |
| `ebit`                                  | bigint     | Earnings before interest and taxes.                                        |
| `ebitda`                                | bigint     | Earnings before interest, taxes, depreciation, and amortization.           |
| `earnings`                              | bigint     | Net income after all expenses and taxes.                                   |
| `revenue_breakdown`                    | jsonb      | Detailed revenue components by category or segment.                        |
| `int_income_breakdown`                | jsonb      | Breakdown of interest income sources.                                      |
| `operating_expense_breakdown`         | jsonb      | Breakdown of operating expenses by category.                               |
| `fixed_assets`                         | bigint     | Value of long-term tangible assets such as property, plant, and equipment. |
| `total_assets`                         | bigint     | Total value of all assets owned by the company.                            |
| `total_equity`                         | bigint     | Shareholders equity value.                                                |
| `current_liabilities`                  | bigint     | Obligations due within one year.                                           |
| `total_liabilities`                    | bigint     | Total obligations of the company.                                          |
| `non_current_liabilities`             | bigint     | Obligations due after one year.                                            |
| `current_assets`                       | bigint     | Assets expected to be converted into cash within one year.                 |
| `total_debt`                           | bigint     | Combined short-term and long-term debt.                                    |
| `operating_expense`                    | bigint     | Total operating expenses incurred.                                         |
| `non_operating_income_or_loss`      | bigint     | Income or loss from non-core business activities.                          |
| `net_financing_cash_flow`            | bigint     | Net cash flow from financing activities.                                   |
| `end_cash_position`                   | bigint     | Cash and equivalents at the end of the period.                             |
| `capital_expenditure`                  | bigint     | Funds spent on acquiring or maintaining fixed assets.                      |
| `free_cash_flow`                      | bigint     | Cash available after capital expenditures.                                 |
| `cash_and_equivalents`                | bigint     | Total cash and near-cash assets.                                           |
| `cash_only`                            | bigint     | Physical cash holdings only.                                               |
| `total_cash_and_due_from_banks`    | bigint     | Cash plus amounts due from other banks.                                    |
| `interest_income`                      | bigint     | Total interest income earned.                                              |
| `interest_expense`                     | bigint     | Total interest expenses incurred.                                          |
| `net_interest_income`                 | bigint     | Interest income minus interest expenses.                                   |
| `premium_income`                       | bigint     | Insurance premium revenue.                                                 |
| `premium_expense`                      | bigint     | Insurance premium costs.                                                   |
| `net_premium_income`                  | bigint     | Premium income minus premium expenses.                                     |
| `non_interest_income`                 | bigint     | Income not derived from interest.                                          |
| `provision`                             | bigint     | Loan loss provisions or similar reserves.                                  |
| `diluted_shares_outstanding`          | bigint     | Number of diluted shares outstanding.                                      |
| `minorities`                            | bigint     | Minority interest in consolidated subsidiaries.                            |
| `net_increased_decreased`             | bigint     | Net change in cash or other metrics.                                       |
| `gross_loan`                           | bigint     | Total loan portfolio before provisions.                                    |
| `allowance_for_loans`                 | bigint     | Loan loss allowance.                                                       |
| `net_loan`                             | bigint     | Loans net of provisions.                                                   |
| `non_loan_earning_assets`            | bigint     | Earning assets not related to loans.                                       |
| `non_loan_non_earning_asset`        | bigint     | Non-earning assets not related to loans.                                   |
| `non_loan_assets`                     | bigint     | All non-loan assets.                                                       |
| `current_account`                      | bigint     | Balances in current accounts.                                              |
| `savings_account`                      | bigint     | Balances in savings accounts.                                              |
| `time_deposit`                         | bigint     | Balances in time deposits.                                                 |
| `total_deposit`                        | bigint     | Total customer deposits.                                                   |
| `other_interest_bearing_liabilities` | bigint     | Other liabilities incurring interest.                                      |
| `non_interest_bearing_liabilities`   | bigint     | Liabilities that do not incur interest.                                    |
| `core_capital_tier1`                  | bigint     | Tier 1 regulatory capital.                                                 |
| `supplementary_capital_tier2`         | bigint     | Tier 2 regulatory capital.                                                 |
| `total_capital`                        | bigint     | Total regulatory capital.                                                  |
| `credit_rwa`                           | bigint     | Credit risk-weighted assets.                                               |
| `market_rwa`                           | bigint     | Market risk-weighted assets.                                               |
| `operational_rwa`                      | bigint     | Operational risk-weighted assets.                                          |
| `total_risk_weighted_asset`          | bigint     | Total risk-weighted assets.                                                |
| `stockholders_equity`                  | bigint     | Total equity attributable to stockholders.                                 |
| `total_high_quality_liquid_asset`   | bigint     | Total high-quality liquid assets for liquidity ratios.                     |
| `cash_outflow`                         | bigint     | Total cash outflows for the period.                                        |
| `cash_inflow`                          | bigint     | Total cash inflows for the period.                                         |
| `net_cash_flow`                       | bigint     | Net change in cash flow.                                                   |
| `realized_capital_goods_investment`  | bigint     | Actual investment in capital goods.                                        |
| `net_operating_cash_flow`            | bigint     | Net cash flow from operating activities.                                   |
| `net_investing_cash_flow`            | bigint     | Net cash flow from investing activities.                                   |
| `industry_breakdown`                   | jsonb      | Revenue or metrics breakdown by industry segment.                          |
| `inventories`                           | bigint     | Value of inventories held.                                                 |
| `prepaid_assets`                       | bigint     | Value of prepaid expenses or assets.                                       |
| `retained_earnings`                    | bigint     | Cumulative net income retained in the business.                            |

### idx_combine_financials_quarterly
----------------------
This view combine the quarterly financial report from 2 sources with the hierarchy or data prioritization as explained below.

* The first priority will be from [idx_financial_sheets_quarterly](#idx_financial_sheets_quarterly)
* If in the first source the metrics is not available or the data is null, then the data will be taken from [idx_financials_quarterly](#idx_financials_quarterly)

Please note in `idx_combine_financials_quarterly`, there are some metrics that can be only available to financial institution only and non-financial institution only. In that case, when the metrics is for financial institution only, the data will be null for non-financial institution and vice versa

| Column Name       | Data Type                | Description |
| ------------------------------------- | ---------- | ---------------------------------------------------------------- |
| `symbol`                                | text       | Stock ticker symbol or company code.                             |
| `date`                                  | date       | Financial reporting date for the data record.                    |
| `interest_income`                      | bigint     | Total interest income earned.                                    |
| `interest_expense`                     | bigint     | Total interest expenses incurred.                                |
| `net_interest_income`                 | bigint     | Interest income minus interest expenses.                         |
| `premium_income`                       | bigint     | Insurance premium revenue.                                       |
| `premium_expense`                      | bigint     | Insurance premium costs.                                         |
| `net_premium_income`                  | bigint     | Premium income minus premium expenses.                           |
| `non_interest_income`                 | bigint     | Income not derived from interest.                                |
| `total_revenue`                        | bigint     | Combined income from all revenue sources.                        |
| `operating_expense`                    | bigint     | Total operating expenses incurred.                               |
| `provision`                             | bigint     | Loan loss provisions or similar reserves.                        |
| `operating_pnl`                        | bigint     | Operating profit or loss from core business activities.          |
| `non_operating_income_or_loss`      | bigint     | Income or loss from non-core business activities.                |
| `earnings_before_tax`                 | bigint     | Profit before income tax is deducted (EBT).                      |
| `tax`                                   | bigint     | Income tax expense for the period.                               |
| `minorities`                            | bigint     | Minority interest in consolidated subsidiaries.                  |
| `earnings`                              | bigint     | Net income after all expenses and taxes.                         |
| `gross_income`                         | bigint     | Total income before expenses are deducted.                       |
| `diluted_shares_outstanding`          | numeric    | Number of diluted shares outstanding.                            |
| `interest_expense_non_operating`     | bigint     | Interest expense not related to core operations.                 |
| `ebit`                                  | bigint     | Earnings before interest and taxes.                              |
| `ebitda`                                | bigint     | Earnings before interest, taxes, depreciation, and amortization. |
| `cost_of_revenue`                     | bigint     | Total direct costs to produce goods or services sold.            |
| `total_assets`                         | bigint     | Total value of all assets owned by the company.                  |
| `gross_loan`                           | bigint     | Total loan portfolio before provisions.                          |
| `allowance_for_loans`                 | bigint     | Loan loss allowance.                                             |
| `net_loan`                             | bigint     | Loans net of provisions.                                         |
| `total_earning_assets`                | bigint     | Assets that generate interest or other returns.                  |
| `non_loan_asset`                      | bigint     | Assets not related to loans.                                     |
| `current_account`                      | bigint     | Balances in current accounts.                                    |
| `savings_account`                      | bigint     | Balances in savings accounts.                                    |
| `time_deposit`                         | bigint     | Balances in time deposits.                                       |
| `total_deposit`                        | bigint     | Total customer deposits.                                         |
| `other_interest_bearing_liabilities` | bigint     | Other liabilities incurring interest.                            |
| `non_interest_bearing_liabilities`   | bigint     | Liabilities that do not incur interest.                          |
| `cash_only`                            | bigint     | Physical cash holdings only.                                     |
| `total_cash_and_due_from_banks`    | bigint     | Cash plus amounts due from other banks.                          |
| `total_liabilities`                    | bigint     | Total obligations of the company.                                |
| `total_equity`                         | bigint     | Shareholders equity value.                                      |
| `total_debt`                           | bigint     | Combined short-term and long-term debt.                          |
| `stockholders_equity`                  | bigint     | Total equity attributable to stockholders.                       |
| `total_non_current_assets`           | bigint     | Assets not expected to be converted to cash within one year.     |
| `total_current_liabilities`           | bigint     | Obligations due within one year.                                 |
| `cash_and_short_term_investments`   | bigint     | Cash and liquid investments with maturities under one year.      |
| `non_loan_assets`                     | bigint     | All non-loan assets.                                             |
| `total_current_asset`                 | bigint     | Assets expected to be converted to cash within one year.         |
| `total_non_current_liabilities`      | bigint     | Obligations due after one year.                                  |
| `net_financing_cash_flow`            | bigint     | Net cash flow from financing activities.                         |
| `net_operating_cash_flow`            | bigint     | Net cash flow from operating activities.                         |
| `net_investing_cash_flow`            | bigint     | Net cash flow from investing activities.                         |
| `net_cash_flow`                       | bigint     | Net change in cash flow.                                         |
| `capital_expenditure`                  | bigint     | Funds spent on acquiring or maintaining fixed assets.            |
| `free_cash_flow`                      | bigint     | Cash available after capital expenditures.                       |

### idx_company_growth_forecast
----------------------
This view calculate the forecast growth or estimation value of revenue and eps based on the current or last eps and revenue. The data is taken from [idx_company_forecast](#idx_company_forecast) and [idx_combine_financials_annual](#idx_combine_financials_annual)

| Column Name       | Data Type                | Description |
| ----------------- | ---------------- | ----------------------------------------------------------------- |
| `symbol`            | text             | Stock ticker symbol or company code.                              |
| `estimate_year`    | smallint         | Year for which the financial estimates are made.                  |
| `eps_estimate`     | real             | Estimated earnings per share for the given year.                  |
| `revenue_estimate` | bigint           | Estimated total revenue for the given year.                       |
| `base_year`        | integer          | Reference year used for comparison in growth calculations.        |
| `eps_growth`       | double precision | Projected percentage growth in EPS compared to the base year.     |
| `revenue_growth`   | double precision | Projected percentage growth in revenue compared to the base year. |

### idx_delisted_12m
----------------------
This view take only the company that did the delisting from IDX to become private company in the last 12 months (1 year). The list of company is taken from [idx_company_profile](#idx_company_profile)

| Column Name       | Data Type                | Description |
| ----------------- | ------------------------ | --------------------------------------------------------------------------------------------- |
| `company_name`     | text                     | Full legal name of the company.                                                               |
| `symbol`            | text                     | Stock ticker symbol of the company.                                                           |
| `address`           | text                     | Registered address of the companys head office.                                              |
| `email`             | text                     | Official company email address.                                                               |
| `phone`             | text                     | Main contact phone number.                                                                    |
| `fax`               | text                     | Company fax number.                                                            |
| `NPWP`              | text                     | Indonesian taxpayer identification number (Nomor Pokok Wajib Pajak).                          |
| `website`           | text                     | Official website URL.                                                                         |
| `listing_date`     | date                     | Date the company was listed on the stock exchange.                                            |
| `listing_board`    | text                     | Board or segment where the companys shares are listed (e.g., Main Board, Development Board). |
| `industry`          | text                     | Industry classification of the company.                                                       |
| `sub_industry`     | text                     | More specific sub-industry classification.                                                    |
| `register`          | text                     | Company registration number or relevant registry entry.                                       |
| `shareholders`      | jsonb                    | List of major shareholders with details, stored as JSON.                                      |
| `directors`         | jsonb                    | List of directors with details, stored as JSON.                                               |
| `comissioners`      | jsonb                    | List of commissioners with details, stored as JSON.                                           |
| `audit_committees` | jsonb                    | List of audit committee members, stored as JSON.                                              |
| `delisting_date`   | date                     | Date the company was delisted                                                 |
| `updated_on`       | timestamp with time zone | Timestamp of the latest data update.                                                          |
| `nologo`            | boolean                  | Indicates whether the company has a logo in the storage                                 |
| `sub_sector_id`   | smallint                 | Reference ID for the companys sub-sector classification.                                     |

### idx_ipo_details_12m
----------------------
This view take details of the listed companies that did the listing in the last 12 months (1 year). The data is taken from [idx_ipo_details](#idx_ipo_details)

| Column Name       | Data Type                | Description |
| ---------------------------- | --------------------------- | ---------------------------------------------------------------------- |
| `symbol`                       | text                        | Stock ticker symbol of the company conducting the offering.            |
| `shares_offered`              | bigint                      | Number of shares being offered in the IPO or share issuance.           |
| `percent_total_shares`       | real                        | Percentage of total company shares represented by the offered shares.  |
| `book_building_start_date`  | date                        | Date when the book-building process begins.                            |
| `book_building_end_date`    | date                        | Date when the book-building process ends.                              |
| `book_building_lower_bound` | integer                     | Minimum price per share set during book-building.                      |
| `book_building_upper_bound` | integer                     | Maximum price per share set during book-building.                      |
| `offering_start_date`        | date                        | Date when the public offering period starts.                           |
| `offering_end_date`          | date                        | Date when the public offering period ends.                             |
| `offering_price`              | integer                     | Final price per share at which shares are offered.                     |
| `distribution_date`           | date                        | Date when the offered shares are distributed to investors.             |
| `prospectus_url`              | text                        | URL link to the official prospectus document.                          |
| `additional_info_url`        | text                        | URL link to supplementary or related offering information.             |
| `created_at`                  | timestamp with time zone    | Timestamp when the record was first created.                           |
| `updated_at`                  | timestamp without time zone | Timestamp when the record was last updated.                            |
| `company_name`                | text                        | Full legal name of the issuing company.                                |
| `listing_date`                | date                        | Date the companys shares are officially listed on the stock exchange. |

### idx_new_company
----------------------
This view gather the important data of the newly listed companies that did listing in the last 6 months. The data is taken from [idx_active_company_profile](#idx_active_company_profile)

| Column Name       | Data Type                | Description |
| ------------- | ---------- | ------------------------------------------------------------------ |
| `symbol`        | text       | Stock ticker symbol of the company.                                |
| `company_name` | text       | Full legal name of the company.                                    |
| `listing_date` | date       | Date when the company was officially listed on the stock exchange. |
| `sector`        | text       | Industry sector in which the company operates.                     |
| `sub_sector`   | text       | More specific classification of the company within its sector.     |
| `description`   | text       | Brief description of the companys business activities.            |
| `market_cap`   | bigint     | Market capitalization of the company in local currency.            |

### idx_sector_reports
----------------------
This view summarize all the important data for each sub-sector which taken from [idx_sector_reports_calc](#idx_sector_reports_calc) and [idx_subsector_metadata](#idx_subsector_metadata)
| Column Name       | Data Type                | Description |
| --------------------------- | ---------------- | -------------------------------------------------------------------------- |
| `sector`                      | text             | Broad industry classification for the group of companies.                  |
| `sub_sector`                 | text             | More specific category within the sector.                                  |
| `slug`                        | text             | URL-friendly unique identifier for the sub-sector.                  |
| `description`                 | text             | General description of the sub-sector.                           |
| `total_companies`            | bigint           | Total number of companies per sub-sector.                         |
| `total_market_cap`          | numeric          | Combined market capitalization of all companies in the sub-sector.              |
| `avg_market_cap`            | numeric          | Average market capitalization per company in the sub-sector.                                 |
| `filtered_median_pe`        | double precision | Median price-to-earnings (P/E) values ratio per sub-sector . |
| `filtered_weighted_avg_pe` | double precision | Average of PE across all active companies, weighted by their respective market cap  |
| `min_company_pe`            | double precision | Lowest P/E ratio values among companies in the sub-sector.                             |
| `max_company_pe`            | double precision | Highest P/E ratio values among companies in the sub-sector.                            |
| `weighted_avg_growth_data` | jsonb            | JSON object containing weighted annual average earnings growth and revenue growth metrics.                    |
| `top_companies`              | jsonb            | JSON array listing the top-performing companies (based on market capitalization, revenue_ttm, profit_ttm, and revenue growth) and in the sub-sector.              |
| `weighted_max_drawdown`     | double precision |The average maximum drawdown (based on the daily closing price) in the last 365 days across all active companies, weighted by their respective market cap  |
| `weighted_rsd_close`        | numeric          | The average relative standard deviation of the daily closing price in the last 365 days across all active companies, weighted by their respective market cap                    |
| `top_change_companies`      | jsonb            | JSON object containing the top 5 companies with the highest price change in the last 30 days. Include the companies metadata such as PE, 1-year price change, 1-month price change, company name, symbol, and last closing price.         |
| `quarterly_market_cap`      | jsonb            | JSON object containing the current ttm (the last 4 quarters) market cap of the subsector, previous ttm (the last 5th to 8th quarters) market cap of the subsector, and average of the current ttm (the last 4 quarters) market cap across all subsectors               |
| `mcap_summary`               | jsonb            | JSON object containing the market cap change (1-week, 1-year, year-to-date), monthly market cap change in the last 12 months, and performance quantile based on the 1-year market cap change of a subsector (calculated from the sum of the market cap of all companies in the subsector)                             |
| `historical_valuation`       | jsonb            | historical_valuation: JSON object containing the median PB, PE, PS, and PCF for the last 4 years (mrq and ttm value for the most recent data, annualized value for historical data)                     |
| `growth_forecasts`           | jsonb            | Array of JSON values containing forecasts of eps growth and revenue growth              |
| `pe_index_description`      | text             | Description of the P/E index methodology for the group.                    |
| `growth_index_description`  | text             | Description of the growth index methodology for the group.                 |
| `health_index_description`  | text             | Description of the health index methodology for the group.                 |
| `median_yield_ttm`          | double precision | Median trailing twelve-month dividend yield across companies in the sub-sector. |


### idx_stock_split_cumulative
----------------------
This view calculate the cumulative stock split ratio from the [idx_stock_split](#idx_stock_split) table.

| Column Name       | Data Type                | Description |
| ------------------------ | ------------------------ | ----------------------------------------------------------------------------- |
| `symbol`                   | text                     | Stock ticker symbol of the company.                                           |
| `cumulative_split_ratio` | real                     | Total cumulative stock split ratio applied to the companys shares over time. |
| `updated_on`              | timestamp with time zone | Date and time when the record was last updated.                               |

### idx_sub_industry_market_cap
----------------------
This view calculate the total market cap per sub_industry based on the IDX-IC. The data is taken from [idx_subsector_metadata](#idx_subsector_metadata) for the IDX-IC classification data and [idx_calc_metrics_daily](#idx_calc_metrics_daily) for the market capitalization data.

| Column Name       | Data Type                | Description |
| ------------------ | ---------- | ------------------------------------------------------------- |
| `sector`             | text       | Broad industry category grouping multiple related businesses. |
| `sub_sector`        | text       | More specific category within the sector.                     |
| `industry`           | text       | Industry classification of the companies.                     |
| `sub_industry`      | text       | More detailed classification within the industry.             |
| `total_market_cap` | numeric    | Combined market capitalization of all companies in the group. |
| `num_of_companies` | bigint     | Total number of companies in the group.                       |

## Materialized View

### idx_aggregated_calc
----------------------
This MV is used to provide metrics aggregation of all active companies in IDX. This MV get scheduled refresh everyday at 05:05 and 11:05 (GMT+7).

| Column Name             | Data Type        | Description | How to Calculate  |
| ----------------------- | ---------------- | -------------------------------------------------------- | --------------------------------------- |
| `weighted_avg_drawdown` | double precision |The market-cap's weighted average of maximum drawdown from each company | The maximum drawdown value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `max_drawdown` column. Calculated by summing each companys drawdown multiplied by its market cap, then dividing by the total market cap of companies with a valid drawdown.|
| `median_drawdown`       | double precision | The median of maximum drawdown from each company| The maximum drawdown value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `max_drawdown` column. Calculated by finding the middle value of all companies maximum drawdowns after sorting them in order.|
| `weighted_avg_rsd`      | double precision | The market-cap's weighted average of each companys RSD (relative standard deviation) of closing prices | The rsd_close value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `rsd_close` column. Calculated by summing each companys RSD multiplied by its market cap, then dividing by the total market cap of companies with a valid RSD. |
| `median_rsd`            | double precision | The median of rsd close price from each company| The rsd_close value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `rsd_close` column. Calculated by finding the middle value of all companies rsd_close after sorting them in order.|
| `weighted_avg_pe`       | double precision | The market-cap's weighted average pe_ttm value of all companies in idx| The market_cap and pe_ttm value is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `pe_ttm` column. Calculated by summing each companys P/E multiplied by its market cap, then dividing by the total market cap of companies with a valid P/E. |
| `unweighted_avg_pe`     | double precision | The average pe_ttm value of all companies in idx | The pe_ttm value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `pe_ttm` column. Calculated by averaging all the non-null pe_ttm value data |
| `median_pe`             | double precision | The middle P/E ratio value when all companies P/E values are sorted | The pe_ttm value of each company is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) data, `pe_ttm` column. Calculated by sorting all the non null pe_ttm value and take the middle pe_ttm value|
| `growth_forecasts`      | jsonb            | Array of JSON values containing forecasts for EPS, revenue, and earnings growth.| The forecast data is taken from [`idx_company_growth_forecast`](#idx_company_growth_forecast). Calculated by taking the market-capweighted averages of EPS growth and revenue growth for each forecast period, then combining them into a JSON array showing the base year, estimate year, and the corresponding growth values.|
| `mcap_change_7d`        | double precision | 7-day IDX market cap change.  | Sum the market cap from `idx_daily_data` grouped by date, and calculate the changes between last date value with last date - 7 days |
| `mcap_change_30d`       | double precision | 30-day IDX market cap change. | Sum the market cap from `idx_daily_data` grouped by date, and calculate the changes between last date value with last date - 30 days |
| `mcap_change_ytd`       | double precision | Year-to-date IDX market cap change.| Sum the market cap from `idx_daily_data` grouped by date, and calculate the changes between last date value with the earliest date in current year|
| `mcap_data_1m`          | jsonb            | Array of JSON values containing daily total_market_cap data for the past month. Data comes from [`idx_daily_data`](#idx_daily_data). | Sum the market cap from `idx_daily_data` grouped by date, filter for the last 1 month. |

### idx_interesting_facts_timely
----------------------
This MV is used to provide the time sensitive interesting facts from the top 50 companies based on the market capitalization value in IDX. This MV get scheduled refresh everyday at 17:00 (GMT +7).

| Column Name             | Data Type        | Description | 
| ----------------------- | ---------------- | -------------- |
| `symbol` | text | Stock ticker symbol of the company. |
| `company_name` | text | The name of the company. |
| `interesting_facts` | jsonb | There timely interesting facts are based on this topics: `upcoming_dividend`, `valuation` (P/E and P/B value), `volume` (transaction volume), and `price` (current price compare to 90d-all-time, 52w-all-time, ytd-all-time, and all-time high/low price).|

### idx_interesting_facts_timely
----------------------
This MV is used to provide the time insensitive interesting facts from the top 50 companies based on the market capitalization value in IDX. This MV get scheduled refresh everyday at 07:00 (GMT +7).

| Column Name             | Data Type        | Description | 
| ----------------------- | ---------------- | -------------- |
| `symbol` | text | Stock ticker symbol of the company. |
| `company_name` | text | The name of the company. |
| `interesting_facts` | jsonb | There untimely interesting facts are based on this topics: `shareholders`, `earnings`, `nipe` (net income per employee), `institution_transaction`, and `esg_score`.|

### idx_daily_mcap_ffill
----------------------
This MV is used to fill null market_cap value in `idx_daily_data`. This MV get scheduled refresh everyday at 04:50 and 10:50 (GMT +7).

| Column Name             | Data Type        | Description | How to Calculate |
| ----------------------- | ---------------- | -------------- | ------------ |
| `symbol` | text | Stock ticker symbol of the company. | - |
| `date` | date | The date when the data is recorded. | - |
| `market_cap` | bigint | The total value of all traded outstanding shares of a company| Gets each companys daily market cap from [`idx_daily_data`](#idx_daily_data]), and if that days value is missing, it fills it with the last available value for that company going backward in time.| 

### idx_mcap_change_heatmap
----------------------
This MV is used to create the heatmap market capitalization change for each sub-sector in IDX based on IDX-IC. This MV get scheduled refresh everyday at 05:00 and 11:00 (GMT +7).

| Column Name | Data Type | Description  | How to Calculate |
| ----------- | --------- | ----------------------------------------------------------------------------------------------------------------- | ------ |
| `sub_sector` | text      | The industry sub-sector classification of the company or security. |- |
| `change_1d`  | numeric   | Percentage change in market capitalization over the last 1 day. | The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous day.| 
| `change_1w`  | numeric   | Percentage change in market capitalization over the last 1 week.| The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous week.|
| `change_1m`  | numeric   | Percentage change in market capitalization over the last 1 month.| The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous month.|
| `change_6m`  | numeric   | Percentage change in market capitalization over the last 6 months.| The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous 6 months.|
| `change_ytd` | numeric   | Year-to-date percentage change in market capitalization, starting from the first trading day of the current year. | The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change since the start of the year|
| `change_1y`  | numeric   | Percentage change in market capitalization over the last 1 year.| The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill).Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous 1 year.|
| `change_3y`  | numeric   | Percentage change in market capitalization over the last 3 years.| The market_cap data is taken from [`idx_daily_mcap_ffill`](#idx_daily_mcap_ffill). Calculated by summing the total market capitalization for each date and sub-sector, then determining the percentage change from the previous 3 years.|

### idx_calc_metrics_annual
----------------------
This MV is used to provide metrics aggregation of each active company's last 5 annual data which related to the annual audited financial data. This MV get scheduled refresh everyday at 05:00 and 11:00 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `symbol` | text | Stock ticker symbol of the company | - |
| `date` | date | Financial period end date | -|
| `pe` | numeric | Price-to-Earnings ratio (annual) | `latest_market_cap  earnings`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `earnings` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `pb` | numeric    | Price-to-Book ratio (annual)  | `latest_market_cap  total_equity`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `total_equity` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `book_value` | numeric | Shareholders equity from balance sheet  | Take the `total_equity` value from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `ps` | numeric    | Price-to-Sales ratio (annual) | `latest_market_cap  revenue`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `revenue` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `pcf`| numeric    | Price-to-Cash Flow ratio (annual) | `latest_market_cap  operating_cash_flow`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `net_operating_cash_flow` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `peg` | numeric | PriceEarnings-to-Growth ratio | `(latest_market_cap  earnings)  (earnings_growth * 100)`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `earnings` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `enterprise_to_ebitda` | numeric    | Enterprise Value to EBITDA ratio  | `(latest_market_cap + total_debt - cash_and_equivalents)  ebitda`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `total_debt`, `cash_and_equivalents`, and `ebitda` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `enterprise_to_revenue` | numeric | Enterprise Value to Revenue ratio | `(latest_market_cap + total_debt - cash_and_equivalents)  revenue`. The latest market cap data is taken from [`idx_daily_data`](#idx_daily_data) and `total_debt`, `cash_and_equivalents`, and `ebitda` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|
| `diluted_eps` | numeric | Diluted Earnings Per Share (annual) | `earnings  diluted_shares_outstanding`. The `earnings` and `diluted_shares_outstanding` data taken from [`idx_combine_financials_annual`](#idx_combine_financials_annual)|


### idx_calc_metrics_quarterly
----------------------
This MV is used to provide metrics aggregation of each active company's latest quarterly data which related to the quarterly financial data. This MV get scheduled refresh everyday at 05:00 and 11:00 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `symbol`  | text | Stock ticker symbol.   | - |
| `revenue_ttm`  | numeric | Total revenue over the trailing 12 months. | Sum of last 4 quarters total revenue. The `total_revenue` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `earnings_ttm` | numeric | Net income over the trailing 12 months. | Sum of last 4 quarters net income (earnings). The `earnings` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `operating_cashflow_ttm` | numeric | Operating cash flow over the trailing 12 months.| Sum of last 4 quarters net operating cash flow.  The `net_operating_cash_flow` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `ebitda_ttm`  | numeric | EBITDA over the trailing 12 months. | Sum of last 4 quarters EBITDA.  The `ebitda` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `diluted_eps_ttm` | double precision | Diluted earnings per share over the trailing 12 months.| Sum of last 4 quarters diluted EPS, the diluted EPS calculate by `earnings  diluted_shares_outstanding`.  The `earnings` and `diluted_shares_outstanding` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `avg_diluted_shares_ttm` | numeric | Average diluted shares outstanding over the trailing 12 months. | Average of last 4 quarters diluted shares outstanding. The `diluted_shares_outstanding` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `free_cash_flow_ttm` | numeric | Free cash flow over the trailing 12 months. | Sum of last 4 quarters free cash flow. `free_cash_flow` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `interest_expense_ttm` | numeric | Interest expense over the trailing 12 months. | Sum of last 4 quarters non-operating interest expense. The `interest_expense_non_operating` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `net_profit_margin` | numeric | Profitability as a percentage of revenue. | `earnings_ttm  revenue_ttm`.|
| `yoy_quarter_revenue_growth`  | double precision | Year-over-year growth in quarterly revenue. | `(latest quarter revenue - revenue from same quarter last year)  last years quarter revenue`. The `total_revenue` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `yoy_quarter_earnings_growth` | double precision | Year-over-year growth in quarterly earnings. | `(latest quarter earnings - earnings from same quarter last year)  last years quarter earnings`. The `earnings` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|                       |
| `interest_coverage_ratio` | numeric | Ability to cover interest expense from operating earnings. | `EBIT  interest_expense_ttm`. The `ebit` and `interest_expense` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `cash_flow_to_debt_ttm` | numeric | Ability to cover debt using operating cash flow. | `operating_cashflow_ttm  total_debt_mrq`. The `net_operating_cash_flow` and `total_debt` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `bve_mrq` | bigint | Book value of equity in the most recent quarter.| Take the latest `stockholders_equity` from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `financials_latest_date` | date| Date of latest available financial data.| - |
| `ev_not_with_mcap` | bigint | Enterprise value excluding market cap. | `latest total_debt - latest cash_and_short_term_investments`. The `total_debt` and `cash_and_short_term_investments` data is taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `total_assets_mrq` | bigint | Total assets in the most recent quarter. | Take the latest `total_assets` data from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| total_liabilities_mrq | bigint | Total liabilities in the most recent quarter. | Take the latest `total_liabilities` data from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `total_equity_mrq` | bigint | Total equity in the most recent quarter. | Take the latest `total_equity` data from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `total_debt_mrq` | bigint | Total debt in the most recent quarter. | Take the latest `total_debt` data from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `roa_ttm` | numeric | Return on assets over the trailing 12 months. | `earnings_ttm  total_assets_mrq`. |
| `roe_ttm` | numeric | Return on equity over the trailing 12 months. | `earnings_ttm  total_equity_mrq`. |
| `dar_mrq` | double precision | Debt-to-asset ratio for the most recent quarter. | `total_debt_mrq  total_assets_mrq`.|
| `der_mrq` | double precision | Debt-to-equity ratio for the most recent quarter. | `total_debt_mrq  total_equity_mrq`. |

### idx_calc_metrics_daily
----------------------
This MV is used to provide metrics aggregation of each active company's daily data that has a relation to price data. This MV get scheduled refresh everyday at 05:00 and 11:00 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `symbol`   | text             | The stock ticker symbol of the company. | - |
| `pe_ttm`  | double precision | Price-to-Earnings ratio based on trailing twelve months.| Latest market cap divided by trailing twelve months earnings. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and `earnings_ttm` taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly). |
| `ps_ttm`  | double precision | Price-to-Sales ratio based on trailing twelve months.| Latest market cap divided by trailing twelve months sales/revenue. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and `revenue_ttm` taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `pb_mrq` | double precision | Price-to-Book ratio using most recent quarter data.| Latest market cap divided by most recent quarter book value of equity. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and `bve_mrq` taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `pcf_ttm` | numeric | Price-to-Cash Flow ratio based on trailing twelve months.| Latest market cap divided by trailing twelve months operating cash flow. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and `operating_cashflow_ttm` taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `enterprise_to_revenue`  | numeric | Enterprise Value divided by total revenue. | Market cap + enterprise value divided by trailing twelve months revenue. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and revenue_ttm and enterprise_value value taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `enterprise_to_ebitda`   | numeric | Enterprise Value divided by EBITDA. | Market cap + enterprise value divided by trailing twelve months EBITDA. Latest market cap data taken from [`idx_daily_data`](#idx_daily_data) and ebitda_ttm and enterprise_value value taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `latest_close`            | integer | The most recent closing stock price. | - |
| `latest_close_date`      | date | The date of the most recent closing price. | - |
| `latest_m1_close`        | integer | Closing stock price previous day.| - |  
| `daily_close_change`     | double precision | Percentage change in closing price compared to the previous trading day. | `(Latest Close  Previous Close)  Previous Close`. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `price_change_7_days`   | double precision | Percentage change in price over the last 7 days.| `(Latest close  close from 7 days ago)  close from 7 days ago`. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `price_change_14_days`  | double precision | Percentage change in price over the last 14 days.| `(Latest close  close from 14 days ago)  close from 14 days ago`. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `price_change_30_days`  | double precision | Percentage change in price over the last 30 days.| `(Latest close  close from 30 days ago)  close from 30 days ago`. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `price_change_365_days` | double precision | Percentage change in price over the last 365 days.| `(Latest close  close from 365 days ago)  close from 365 days ago`. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `market_cap`              | bigint | Total market capitalization of the company.| - |
| `max_drawdown`            | double precision | Maximum observed drop in stock price from peak to trough over a period.| Maximum absolute percentage drop from any peak price over the past 365 days. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `rsd_close`               | numeric | Relative standard deviation of closing prices.| Standard deviation of daily closes over the past 365 days divided by their average. All close price data is taken from [`idx_daily_data`](#idx_daily_data).| 
| `yearly_mcap_chg`        | double precision | Year-over-year percentage change in market capitalization. | `(Latest market cap  market cap from 12 months ago)  market cap from 12 months ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_delta_7_days`     | bigint           | Absolute change in market capitalization over the last 7 days. | `Latest market cap  market cap from 7 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_delta_14_days`    | bigint           | Absolute change in market capitalization over the last 14 days. | `Latest market cap  market cap from 14 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_delta_30_days`    | bigint           | Absolute change in market capitalization over the last 30 days. | `Latest market cap  market cap from 30 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_change_7_days`    | double precision | Percentage change in market capitalization over the last 7 days.| `(Latest market cap  market cap from 7 days ago)  market cap from 7 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_change_14_days`   | double precision | Percentage change in market capitalization over the last 14 days.| `(Latest market cap  market cap from 14 days ago)  market cap from 14 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `mcap_change_30_days`   | double precision | Percentage change in market capitalization over the last 30 days.| `(Latest market cap  market cap from 30 days ago)  market cap from 30 days ago`. All market capitalization data is taken from [`idx_daily_data`](#idx_daily_data).|
| `forward_pe` | double precision | Price-to-Earnings ratio using projected earnings.  | Latest close divided by forward EPS. The data `forward_eps` data is taken from [`idx_key_stats`](#idx_key_stats) and the close price is taken from [`idx_daily_data`](#idx_daily_data).| <!-- pending -->
| `peg_ratio`  | double precision | Price/Earnings-to-Growth ratio, adjusting PE by expected growth rate.| pe_ttm divided by year-over-year quarterly earnings growth. The `pe_ttm` data and `yoy_quarter_earnings_growth` taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|

### idx_company_report_calc
----------------------
This MV is used to provide metrics aggregation of each active company's which supply the data for [`idx_company_report`](#idx_company_report). This MV get scheduled refresh everyday at 05:05 and 11:05 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `symbol`   | text | The stock ticker symbol of the company. | - |
| `market_cap_rank` | bigint | Ranking of companies by market capitalization (1 = highest). | `RANK() OVER market_cap`, the market_cap data is from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `employee_num_rank` | bigint | Ranking of companies by employee count (1 = largest). | `RANK() OVER employee_num)`, employee_num data from [`idx_key_stats`] (#idx_key_stats).|
| `historical_dividends` | jsonb | JSON array of annual dividend history including breakdowns per ex-dividend date.| All dividend data is from [`idx_dividend`](#idx_dividend) . Structure per year: `{ "year": YYYY, "total_dividend": X, "total_yield": Y, "breakdown": [ { "date": ..., "total": ..., "yield": ... } ] }`. |
| `dividend_ttm`| real | Total dividends (sum of dividend per share) over the trailing 12 months.| Take the sum of last 1 year dividend for each company. The dividend data taken from [`idx_dividend`](#idx_dividend).|
| `annual_yield` | jsonb | JSON array of annual dividend yield and total dividend per year. | Calculate the sum of dividend-per-share and the sum of dividend yield per year per company. The dividend data taken from [`idx_dividend`](#idx_dividend). The data structure will be: `{ "year": YYYY, "total": total_dividend, "yield": total_yield }`.                                                                                                                                       |
| `yield_ttm` | double precision | Dividend yield over trailing 12 months. | Calculate using `(sum(dividend_ttm)  latest_close)`. The dividend_ttm data taken from [`idx_dividend`](#idx_dividend) and the latest_close data taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `dividend_yield_avg` | jsonb | Average dividend yield over last 5 years (or since IPO if listed < 5 years). | Calculate by `(sum(annual_yield)  period)`. The `annual_yield` data taken from [`idx_dividend`](#idx_dividend). The period itself, calculated by take a static `5` if listing_date > years, if not then `period = current_date - listing_date` and the listing_date data taken from [`idx_company_profile`](#idx_company_profile). The JSON structure result will be: `{ "avg_yield": X, "period": Y }`.|
| `payout_ratio`| double precision | Dividend payout ratio based on earnings per share. | `dividend_ttm  diluted_eps_ttm`. The `diluted_eps_ttm` data is taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `cash_payout_ratio` | double precision | Dividend payout ratio based on free cash flow. | `dividend_ttm  (free_cash_flow_ttm  avg_diluted_shares_ttm)`. The `free_cash_flow_ttm` and `avg_diluted_shares_ttm` data are taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `last_ex_dividend_date`   | date | Most recent ex-dividend date.| Latest ex-date for each company in [`idx_dividend`](#idx_dividend) table.|
| `company_growth_forecasts` | jsonb            | JSON of forecasted EPS & revenue growth by year. | Data taken from [`idx_company_growth_forecast`](#idx_company_growth_forecast), with the JSON structure: `jsonb_agg({ "base_year": ..., "estimate_year": ..., "eps_growth": ..., "revenue_growth": ... })`.|
| `company_value_forecasts`  | jsonb | JSON of forecasted EPS & revenue values by year.| Data taken from [`idx_company_growth_forecast`](#idx_company_growth_forecast), with the JSON structure: `jsonb_agg({ "estimate_year": ..., "eps_estimate": ..., "revenue_estimate": ... })`.|


### idx_sectors_report_calc
----------------------
This MV is used to provide metrics aggregation of each sub-sectors's which supply the data for [`idx_sector_reports`](#idx_sector_reports). This MV get scheduled refresh everyday at 05:05 and 11:05 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `sub_sector_id`| smallint | Identifier of the sub-sector. | - |
| `total_companies` | bigint | Number of companies in the sub-sector.| Count the number of `symbol` from [`idx_active_company_profile`](#idx_active_company_profile). |
| `total_market_cap` | numeric | Total market capitalization of all companies in the sub-sector. | Sum of the market cap value of each company that belong to the sub-sector. The data is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `avg_market_cap` | numeric | Average market capitalization of companies in the sub-sector. | Average of the market cap value of each company that belong to the sub-sector. The data is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `filtered_weighted_avg_pe` | double precision | Weighted average P/E ratio of companies in the sub-sector, weighted by market cap. | `SUM(pe_ttm * market_cap)  SUM(market_cap)` where `pe_ttm` is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `min_company_pe` | double precision | Minimum P/E ratio among companies in the sub-sector. | `MIN(pe_ttm)`, `pe_ttm` data taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `max_company_pe`| double precision | Maximum P/E ratio among companies in the sub-sector.| `MAX(pe_ttm)`, `pe_ttm` data taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `weighted_avg_growth_data` | jsonb | Annual weighted average revenue and earnings growth for the sub-sector. | Calculated using `SUM(annual_revenue_growth * market_cap)  SUM(market_cap)` for `avg_annual_revenue_growth` and `SUM(annual_earning_growth * market_cap)  SUM(market_cap)` for `avg_annual_earning_growth` group by sub-sector. The `avg_annual_revenue_growth` and `avg_annual_earning_growth` data taken and calculated from [`idx_combine_financials_annual](#idx_combine_financials_annual), with the aggregated JSON per year: `{ "year": YYYY, "avg_annual_revenue_growth": X, "avg_annual_earning_growth": Y }`.|
| `top_companies` | jsonb | JSON object containing the top 5 companies in the sub-sector by revenue, profit, revenue growth, and market cap. | All data are taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) and [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly), with the structure: `{ "top_revenue": [...], "top_profit": [...], "top_growth": [...], "top_mcap": [...] }`.|
| `weighted_max_drawdown` | double precision | Weighted average of companies maximum drawdowns, weighted by market cap.| Average of `max_drowndown` for each companies in each sub-sector, calculated with `SUM(max_drawdown * market_cap)  SUM(market_cap)`. The max_drawdow data taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `weighted_rsd_close` | numeric | Weighted average relative standard deviation of closing prices across the sub-sector. | Average of `rsd_close` for each companies in each sub-sector, calculated with `SUM(rsd_close * market_cap)  SUM(market_cap)`. The max_drawdow data taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `top_change_companies` | jsonb | JSON array of top 5 companies with the highest 30-day price changes in the sub-sector.| All the data is taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily), with the structure: `{ "symbol": ..., "name": ..., "last_close": ..., "1mth": ..., "1yr": ..., "pe": ... }`.|
| `quarterly_market_cap` | jsonb | Historical quarterly market capitalization of the sub-sector. | From function `calculate_sub_sector_quarterly_market_cap()`. The data will show the sum of `prev_ttm_mcap` (last 8 to quarter based on current date), sum of `current_ttm_mcap` (last 4 quarter based on current date), and the average of `current_ttm_mcap` (last 4 quarter based on current date). The data is taken from [`idx_daiy_data`](#idx_daily_data).|
| `mcap_summary` | jsonb | Market capitalization summary (aggregated stats). | From function `calculate_sub_sector_mcap_summary()`. The data will show the summary of `mcap_change` (1 week, 1 year, and year-to-date change), `monthly_performance` (the sum of market capitalization value for the last 12 months), and `performance_quantile` (the percentile position of a sub-sectors 1-year market cap change, compared to all sub-sectors).|
| `filtered_median_pe` | double precision | Median P/E ratio of the sub-sector from historical data.| From `get_subsector_historical_valuation()`. Calculated the middle P/E ratio value among all companies in that sub-sector for a given year. |
| `historical_valuation`| jsonb | Historical valuation metrics (e.g., P/E ratio over time) for the sub-sector. | From `get_subsector_historical_valuation()`. All the value P/E, PBV, PS, and PCF for each year is the median value.|
| `growth_forecasts` | jsonb | Weighted average EPS and revenue growth forecasts for the sub-sector by year. | Calculated using `SUM(revenue_growth * market_cap)  SUM(market_cap)` for `revenue_growth` and `SUM(eps_growth * market_cap)  SUM(market_cap)` for `eps_growth` group by sub-sector. The `revenue_growth` and `eps_growth` data taken and calculated from [`idx_company_growth_forecast](#idx_company_growth_forecast), with the JSON structure: `{ "base_year": ..., "estimate_year": ..., "eps_growth": ..., "revenue_growth": ... }`. |
| `median_yield_ttm` | double precision | Median trailing 12-month dividend yield across companies in the sub-sector. | `PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY yield_ttm)`, yield_ttm data taken from [`idx_company_report_calc`](#idx_company_report_calc).|

### idx_company_report
----------------------
This view summarize all the important data for each company which taken from the other Materialized Views, Views, and Tables. This MV get scheduled refresh everyday at 05:05 and 11:05 (GMT+7).

| Column Name              | Data Type        | Description | How to Calculate |
| ------------------------ | ---------------- | -------------------------------- | ---------- |
| `symbol`   | text | The stock ticker symbol of the company. | - |
| `nologo` | boolean | Indicator whether the company has logo available in the storage| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `company_name` | text | Registered name of the company. | Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `listing_board` | text | Stock exchange board where the company is listed (e.g., Main Board, Growth Board). | Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `industry` | text | Industry classification of the company based on IDX-IC | Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `sub_industry` | text | More granular industry classification under the main industry based on IDX-IC. | Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `sector` | text | Broad sector classification (e.g., Financials, Technology) based on IDX-IC.| Data directly taken from [`idx_subsector_metadata`](#idx_subsector_metadata).|
| `sub_sector`| text | More detailed classification under sector based on IDX-IC.| Data directly taken from [`idx_subsector_metadata`](#idx_subsector_metadata).|
| `market_cap` | bigint | Latest market capitalization value.| Data directly taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `market_cap_rank` | bigint | Rank of the company by market capitalization compared to all active companies in IDX.| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `address` | text | Companys registered address.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `employee_num` | numeric | Reported number of employees.| Take the `permanent_employee` number if the data is available in [`idx_manual_input`](#idx_manual_input), if not then use the employee data from [`idx_key_stats`](#idx_key_stats).|
| `listing_date` | date  | Initial listing date of the company on the stock exchange.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `website` | text | Official website of the company.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `phone` | text | Contact phone number of the company.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `email` | text | Contact email address of the company.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `last_close_price`| integer | Last available closing stock price. | Data directly taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `latest_close_date`| date | Date of the last available closing stock price.| Data directly taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `daily_close_change`| double precision | Daily price change percentage compared to the previous close.| Data directly taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `forward_pe` | double precision | Forward price-to-earnings ratio based on analyst EPS estimates.| Data directly taken from [`idx_calc_metrics_daily`](#idx_calc_metrics_daily).|
| `employee_num_rank` | bigint| Rank of the company based on number of employees compared to all active companies in IDX.| Do the `Rank()` over the `employee_num` column.|
| `key_executives` | jsonb | List of key executives ith details.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `executives_shareholdings` | jsonb | List of executives shareholdings and ownership percentages.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `major_shareholders` | jsonb | Major institutional and individual shareholders with ownership details.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `eps` | numeric | Latest earnings per share (EPS). | Latest `eps` value per company in the [`idx_calc_metrics_annual`](#idx_calc_metrics_annual).|
| `historical_valuation` | jsonb | Historical valuation metrics (P/E, P/B, P/S, PCF, PEG, Enterprise to Ebitda, and Enterprise to Revenue) by year. | All the data is compiled from the [`idx_calc_metrics_annual`](#idx_calc_metrics_annual)|
| `historical_financials` | jsonb | Historical annual financial statements (income, balance sheet, cash flow).| All the data is compiled from the [`idx_combine_financials_annual`](#idx_combine_financials_annual).|
| `self_financial_info` | jsonb  | Company-provided recent financial information (ttm or mrq data). | All the data is compiled from the [`idx_calc_metrics_daily`](#idx_calc_metrics_daily) and [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `historical_dividends` | jsonb | Historical dividend data including payout amounts, yields, and dates. | Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `annual_yield`| jsonb | Yearly aggregated dividend yield data for charting.| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `yield_ttm` | double precision | Trailing twelve-month (TTM) dividend yield. | Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `dividend_yield_avg` | jsonb | Average dividend yield over the last 5 years (or another period based on the ipo_date).| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `dividend_ttm` | real | Total dividends paid over the trailing twelve months.| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `payout_ratio` | double precision | Ratio of dividends paid to net income (dividend  EPS). | Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `cash_payout_ratio` | double precision | Ratio of dividends paid to free cash flow (dividend  free cash flow per share).| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `last_ex_dividend_date` | date | Last ex-dividend date (cut-off date for dividend eligibility).| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `point_summaries` | jsonb | Key summary highlights of the company (custom notes/annotations).| Data directly taken from [`idx_key_stats`](#idx_key_stats).|
| `company_growth_forecasts`| jsonb | Forecasted EPS and revenue growth data by year.| Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc).|
| `company_value_forecasts` | jsonb | Forecasted and latest EPS and revenue absolute values by year. | Data directly taken from [`idx_company_report_calc`](#idx_company_report_calc) and [`idx_combine_financials_annual`](#idx_combine_financials_annual).|
| `wsj_format` | smallint | Display formatting option for WSJ-style reports. | Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `top_transactions` | jsonb | Recent top institution transactions.| Data directly taken from [`idx_institution_transactions`](#idx_institution_transactions).|
| `monthly_net_transactions` | jsonb | Monthly aggregated buy/sell institution transaction data.| Data directly taken from [`idx_institution_transactions`](#idx_institution_transactions).|
| `yoy_quarter_earnings_growth` | double precision | Year-over-year quarterly earnings growth percentage. | Data directly taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `yoy_quarter_revenue_growth` | double precision | Year-over-year quarterly revenue growth percentage.| Data directly taken from [`idx_calc_metrics_quarterly`](#idx_calc_metrics_quarterly).|
| `intrinsic_value`| bigint | Estimated intrinsic value of the company (valuation model). | Detail calculation/explanation is explained in [`tags`](#tags) | 
| `technical_rating_breakdown` | jsonb | Technical analysis breakdown (e.g., moving averages, momentum indicators).| Data directly taken from [`idx_key_stats`](#idx_key_stats).|
| `analyst_rating_breakdown`| jsonb | Analyst ratings distribution (buy/hold/sell).| Data directly taken from [`idx_key_stats`](#idx_key_stats).|
| `all_time_price` | jsonb | Historical all-time price data. | Data directly taken from [`idx_all_time_price`](#idx_all_time_price).|
| `esg_score` | real | Environmental, Social, and Governance (ESG) score.| Data directly taken from [`idx_esg_score`](#idx_esg_score).|
| `alias` | text[] | List of alternative or old company names or aliases.| Data directly taken from [`idx_company_profile`](#idx_company_profile).|
| `idx_filings` | jsonb | Historical company insider trading.| Data directly taken from [`idx_filings`](#idx_filings).|
| `sankey_components`| json  | Components for generating a income statement's sankey diagram| Data directly taken from [`idx_manual_input`](#idx_manual_input).|
| `historical_revenue_opex_breakdown` | json | Historical breakdown of revenue and operating expenses. | Data directly taken from [`idx_manual_input`](#idx_manual_input).|
| `historical_financial_ratio` | jsonb | Historical financial ratios (profit margins, leverage, returns, etc.).| Detail calculation/explanation is explained in [`tags`](#tags) | 
| `peers_data` | jsonb | Peer company comparison data. | Data directly taken from [`peers_data`](#peers_data).|
| `historical_financials_quarterly` | jsonb | Historical quarterly financial statements. | All data directly taken from [`idx_combine_financials_quarterly`](#idx_combine_financials_quarterly).|
| `upcoming_dividends` | jsonb | Scheduled upcoming dividend events (amount, ex-dividend date, payment date). | Data directly taken from [`idx_upcoming_dividend`](#idx_upcoming_dividend).|
| `tags` | text[] | Tags/labels associated with the company. | Detail calculation/explanation is explained in [`tags`](#tags) | 
| `indices` | text[] | The index in IDX where the company belongs to | Data directly taken from [`idx_company_profile`](#idx_company_profile)|


### peers_data
----------------------
This MV compiles peer information for each company to enable comparisons. Peers are identified using IDX-IC classifications in the following hierarchy: sub-industry, industry, sub-sector, and sector. For each company, the dataset includes data from 9 peers plus the company itself. Ranking is determined by grouping companies within the same category (starting from sub-industry, then industry, sub-sector, and sector) and ordering them by market capitalization. The view is refreshed daily at 23:00 (GMT+7).

| Column Name | Data Type | Description |
| ----------- | --------- | ----------- | 
| `symbol`      | text      | Stock ticker symbol of the company. |
| `peers_data`  | jsonb     | Peers data compilation that consist of key financial metrics, valuation figures, and market cap information of each company in the peers|

### sgx_companies (Pending)

## Other Detail Column Explanation

### Historical Financial Ratio
This is the detail description and calculation for all the metrics in [`idx_company_report.historical_financial_ratio`](#idx_company_report)

**Leverage Ratios**
------------------------------
* **Debt-to-Equity Ratio**: Measures the proportion of debt financing relative to shareholders equity. `Formula: Total Liabilities / Total Equity`.
* **Debt-to-Asset Ratio**: Shows the share of assets financed by debt. `Formula: Total Debt / Total Assets`.
* **Interest Coverage Ratio (Non-bank only)**: Ability to pay interest expenses with operating earnings. `Formula: EBIT / Interest Expense`.
* **Cash Flow to Debt Ratio (Non-bank only)**: Ability to repay debt using operating cash flow. `Formula: Operating Cash Flow / Total Debt`.

**Profitability Ratios**
------------------------------
* **Net Profit Margin**: Share of revenue converted into net earnings. `Formula: Earnings / Revenue`.
* **Operating Profit Margin**: Measures operating efficiency before interest and tax. `Formula: Operating P&L / Revenue`.
* **Gross Profit Margin (Non-bank only)**: Measures profitability before operating expenses. `Formula: Gross Profit / Revenue`.
* **Return on Assets (ROA)**: Efficiency in using assets to generate earnings. `Formula: Earnings / Total Assets`.
* **Return on Equity (ROE)**: Profitability relative to shareholders equity. `Formula: Earnings / Total Equity`.
* **Cost-to-Income Ratio (Bank only)**: Efficiency ratio for banks showing operating costs relative to income. `Formula: Operating Expense / Operating P&L`.
* **Efficiency Ratio (Bank only)**: Variant of profitability measure, often tied to asset efficiency. `Formula: Earnings / Total Assets`.
* **Net Interest Margin (NIM) (Bank only)** Profitability of interest-bearing assets. `Formula: Net Interest Income / Non-loan Earning Assets`.

**Liquidity Ratios**
------------------------------
* **Current Ratio (Non-bank only)**: Ability to cover short-term liabilities with short-term assets. `Formula: Current Assets / Current Liabilities`.
* **Operating Cash Flow Margin**: Measures the proportion of revenue converted into operating cash flow. `Formula: Operating Cash Flow / Revenue`.
* **Loan-to-Deposit Ratio (Bank only)**: Shows lending activity relative to deposits. `Formula: Net Loan / Total Deposit`
* **CASA Ratio (Bank only)**: Share of deposits in Current Account Savings Account (low-cost funds). `Formula: (Current Account + Savings Account) / Total Deposits`
* **Liquidity Coverage Ratio (LCR) (Bank only)**: Short-term liquidity adequacy under stress scenarios. `Formula: High-Quality Liquid Assets / Net Cash Flow`.
* **Leverage Ratio (Bank only)**:  Measures Tier-1 capital adequacy relative to assets. `Formula: Core Capital Tier 1 / Total Assets`.

**Efficiency Ratios**
------------------------------
* **Total Asset Turnover**: Efficiency in generating revenue from total assets. `Formula: Revenue / Total Assets`.
* **Fixed Asset Turnover (Non-bank only)**: Efficiency in generating revenue from fixed (or current, based on your column) assets. `Formula: Revenue / Current Assets`.
* **Capital Adequacy Ratio (CAR) (Bank only)**: Measures a banks capital strength against risk-weighted assets. `Formula: (Tier 1 Core Capital + Tier 2 Supplementary Capital) / Total Risk-Weighted Assets`.


### Tags
This is the detail description for all the `tags` value that is available in the [`idx_company_report.tags`](#idx_company_report)

- `top-ten-1m-leaders`: 10 companies in 30d top gainers -> based on price change. 
- `top-ten-1m-laggards`: 10 companies in 30d top losers -> based on price change.
- `top-ten-1y-leaders`: 10 companies in 1y top gainers -> based on price change.
- `top-ten-1y-laggards`: 10 companies in 1y top losers -> based on price change.
- `public-float-under-25`: Public float under 25%. 
- `ytd-low`: Companies that reach lowest ytd price in the last 7 days.
- `ytd-high`: Companies that reach highest ytd price in the last 7 days.
- `90-d-low`: Companies that reach lowest 90d price in the last 7 days.
- `90-d-high`: Companies that reach highest 90d price in the last 7 days.
- `52-w-low`: Companies that reach lowest 52w price in the last 7 days.
- `52-w-high`: Companies that reach highest 52w price in the last 7 days.
- `all-time-low`: Companies that reach lowest all time price in the last 7 days.
- `all-time-high`: Companies that reach highest all time price in the last 7 days. 
- `public-float-under-25`: Companies with public owning <= 25%.
- `invested-by-danantara`: Companies that have Danantara as one of the shareholders.
- `majority-shareholders-in-control-50`: Companies that have either one of the directors/commissioners with >= 50% of shares percentage individually (for example the president director have 60%).
- `single-institution-holding-70`: Largest shareholder owns >= 70%.
- `upcoming-dividend`  : companies that the dividend ex-date is greater than current date.
- `top-90d-transaction-volume`: 30 companies with the highest 90d transaction volume.
- `top-90d-transaction-value`: 30 companies with the highest 90d transaction value (volume * price).
- `esg-under-25`  : companies with egs score lower than 25 (lower is better).
- `top-30-yoy-earning-growth`: 30 companies with the highest yoy quarter earning growth.
- `top-30-yoy-revenue-growth`: 30 companies with the highest yoy quarter revenue growth.
- `top-20-institution-selling`: Top 20 companies with the highest institution selling transaction value in the last month.
- `top-20-institution-buying`: Top 20 companies with the highest institution buying transaction value in the last month data.
- `top-3-pe-per-sectors`: Top 3 companies per sectors with the lowest PE (not include negative value and null).
- `public-float-over-50`: Companies with public owning >= 50%.
- `top-3-nipe-per-sectors`: Top 3 companies per sectors with highest NIPE.
- `insider-1-month-buy`: Companies that have insider buy transaction in the last 1 month.
- `insider-1-month-sell`: Companies that have insider sell transaction in the last 1 month.
- `dividend-yield-ttm-above-5-percent`: Companies with dividend yield TTM value more than 5%.

### Intrinsic Value
This is the detail step how to calculate Intrinsic Value that is available in the [`idx_company_report.intrinsic_value`](#idx_company_report)

**Step 1. Estimate Shares Outstanding**
* Formula:

  $$
  text{Shares Outstanding} = frac{text{Market Cap}}{text{Share Price}}
  $$
* This tells us how many shares the company has issued.

**Step 2. Calculate Free Cash Flow (FCF)**
* Take the companys **Free Cash Flow** from the past 3 years.
* Compute the **average FCF** to smooth out fluctuations.
* This gives a realistic estimate of annual cash flow the business generates.

**Step 3. Discount FCF to Present Value**
* Apply a **Discounted Cash Flow (DCF)** model:

  * Project future FCF.
  * Discount those cash flows back to today using a **discount rate** (reflects risk & cost of capital).
  * Add a **terminal value** for cash flows beyond the projection period.

$$
text{Present Value of FCF} = sum frac{FCF_t}{(1+r)^t} + text{Terminal Value}
$$

**Step 4. Adjust for Net Debt**
* Net Debt = **Total Debt  Cash**
* Subtracting net debt adjusts the enterprise value into equity value.

**Step 5. Calculate Intrinsic Value per Share**
* Finally, divide by shares outstanding:
$$
text{Intrinsic Value per Share} = frac{text{Present Value of FCF} - text{Net Debt}}{text{Shares Outstanding}}
$$

